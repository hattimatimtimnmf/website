// --- REUSABLE HTML COMPONENTS ---

// Define the base path for all files, which must include the repository name (website)
// If you ever move the repo content to the root of the GitHub Pages site, you would remove "/website"
const BASE_PATH = "/website"; 

// Function to construct the absolute path
function getAbsolutePath(filename) {
    // This handles both files (e.g., index.html) and anchors (e.g., #about)
    if (filename.startsWith("#")) {
        // If it's an anchor, we link to the base index file plus the anchor
        return BASE_PATH + "/index.html" + filename;
    }
    return BASE_PATH + "/" + filename;
}

// 1. Navigation Bar HTML (Header) - Uses getAbsolutePath()
const headerHTML = `
    <nav class="navbar">
        <div class="nav-brand">
            <a href="${getAbsolutePath('index.html')}" class="nav-item">Hattimatimtim üè°</a>
        </div>
        <div class="nav-left" id="nav-links">
            <a href="${getAbsolutePath('lessons.html')}" class="nav-item">Lessons</a>
            <a href="${getAbsolutePath('mock_test.html')}" class="nav-item">Mock Test</a>
            <a href="${getAbsolutePath('#games')}" class="nav-item">Play Zone</a>
            <a href="${getAbsolutePath('#stories')}" class="nav-item">Story Time</a>
            <a href="${getAbsolutePath('#about')}" class="nav-item">About Us</a>
        </div>
        <div class="nav-right">
            <a href="${getAbsolutePath('#account')}" class="nav-item account-btn">My Account</a>
        </div>
        <button class="menu-toggle" aria-label="Toggle Navigation">‚ò∞</button>
    </nav>
`;

// 2. Footer HTML - Uses getAbsolutePath()
const footerHTML = `
    <footer class="main-footer">
        <div class="footer-links">
            <a href="${getAbsolutePath('index.html#about')}">About Us</a> |
            <a href="${getAbsolutePath('index.html#contribute')}">Contribute</a> |
            <a href="${getAbsolutePath('index.html#feedback')}">Feedback</a> |
            <a href="${getAbsolutePath('index.html#privacy')}">Privacy</a>
        </div>
        <p>¬© 2025 Hattimatimtim. All Rights Reserved. Made with fun and imagination!</p>
    </footer>
`;

// --- INJECTION FUNCTION (rest remains the same) ---

function loadGlobalComponents() {
    // Inject Header
    const headerPlaceholder = document.getElementById('header-placeholder');
    if (headerPlaceholder) {
        headerPlaceholder.innerHTML = headerHTML;
    }

    // Inject Footer
    const footerPlaceholder = document.getElementById('footer-placeholder');
    if (footerPlaceholder) {
        footerPlaceholder.innerHTML = footerHTML;
    }

    // --- Add Mobile Menu Toggle Logic (Needed on all pages) ---
    document.addEventListener('DOMContentLoaded', () => {
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.getElementById('nav-links');
        const navRight = document.querySelector('.nav-right');

        if (menuToggle && navLinks && navRight) {
            menuToggle.addEventListener('click', function() {
                navLinks.classList.toggle('active');
                navRight.classList.toggle('active');
            });
        }
    });
}

// Call the function immediately to load components
loadGlobalComponents();